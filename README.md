# ACDC Diagram Editor

### Backend
- **Node.js 20, TypeScript, Express**
- **PostgreSQL** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º, –±–ª–æ–∫–æ–≤ –∏ —Å–≤—è–∑–µ–π
- **Docker, Docker Compose** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **REST API** - –ø–æ–ª–Ω—ã–π CRUD –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º

### Frontend
- **Vue.js 3** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Vite** - –±—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –∏ dev —Å–µ—Ä–≤–µ—Ä
- **SVG** - –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º –Ω–∞ —Ö–æ–ª—Å—Ç–µ
- **Composition API** - —Ä–µ–∞–∫—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
acdc-backend/
‚îú‚îÄ‚îÄ src/                    # Backend TypeScript –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API
‚îÇ   ‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ repositories/      # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ routes/           # –ú–∞—Ä—à—Ä—É—Ç—ã Express
‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û
‚îÇ   ‚îî‚îÄ‚îÄ types.ts          # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ frontend/              # Vue.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/   # Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ composables/  # –ö–æ–º–ø–æ–∑–∏—Ü–∏–∏ Vue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.vue       # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.js       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ index.html        # HTML —à–∞–±–ª–æ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.js    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite
‚îú‚îÄ‚îÄ public/               # –°–æ–±—Ä–∞–Ω–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ sql/init.sql          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îî‚îÄ‚îÄ docker-compose.yml    # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

## üèÉ‚Äç‚ôÇÔ∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

### 2. –ó–∞–ø—É—Å–∫ –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up --build

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
# - Frontend: http://localhost:5173 (Vue.js —Ä–µ–¥–∞–∫—Ç–æ—Ä)
# - Backend API: http://localhost:3000
# - PostgreSQL: localhost:5432
```

### 3. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–¢–µ—Ä–º–∏–Ω–∞–ª 1 - Backend:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–±–µ—Ä–∏—Ç–µ TypeScript
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2 - Frontend:**
```bash
cd frontend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä
npm run dev
```

## üåê API Endpoints (v1)

### –î–∏–∞–≥—Ä–∞–º–º—ã
- `GET /api/v1/diagrams` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–∏–∞–≥—Ä–∞–º–º
- `GET /api/v1/diagrams/:id` - –ø–æ–ª—É—á–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É –ø–æ ID
- `POST /api/v1/diagrams` - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –¥–∏–∞–≥—Ä–∞–º–º—É
- `PUT /api/v1/diagrams/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É
- `DELETE /api/v1/diagrams/:id` - —É–¥–∞–ª–∏—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É

### –ë–ª–æ–∫–∏ –¥–∏–∞–≥—Ä–∞–º–º
- `GET /api/v1/diagram-blocks/diagram/:diagramId` - –±–ª–æ–∫–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- `GET /api/v1/diagram-blocks/:id` - –ø–æ–ª—É—á–∏—Ç—å –±–ª–æ–∫
- `POST /api/v1/diagram-blocks` - —Å–æ–∑–¥–∞—Ç—å –±–ª–æ–∫
- `PUT /api/v1/diagram-blocks/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –±–ª–æ–∫
- `DELETE /api/v1/diagram-blocks/:id` - —É–¥–∞–ª–∏—Ç—å –±–ª–æ–∫

### –°–≤—è–∑–∏ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏
- `GET /api/v1/diagram-connections/diagram/:diagramId` - —Å–≤—è–∑–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- `POST /api/v1/diagram-connections` - —Å–æ–∑–¥–∞—Ç—å —Å–≤—è–∑—å
- `DELETE /api/v1/diagram-connections/:id` - —É–¥–∞–ª–∏—Ç—å —Å–≤—è–∑—å

## üé® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞

### –¢–∏–ø—ã –¥–∏–∞–≥—Ä–∞–º–º
- **Class Diagrams** - –¥–∏–∞–≥—Ä–∞–º–º—ã –∫–ª–∞—Å—Å–æ–≤ UML
- **Use Case Diagrams** - –¥–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–æ–≤
- **Free Mode** - —Å–≤–æ–±–æ–¥–Ω–æ–µ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ

### –≠–ª–µ–º–µ–Ω—Ç—ã
- **–ö–ª–∞—Å—Å—ã, –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, Enum** - –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º –∫–ª–∞—Å—Å–æ–≤
- **–ê–∫—Ç–æ—Ä—ã, Use Case** - –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–æ–≤
- **–ó–∞–º–µ—Ç–∫–∏, –ü–∞–∫–µ—Ç—ã** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- **–ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏, –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –ö–æ–º–ø–æ–∑–∏—Ü–∏—è** - —Ç–∏–ø—ã —Å–≤—è–∑–µ–π

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- üìù –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- üîó –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
- üéØ Drag & Drop –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
- üìê –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ —Å–≤–æ–π—Å—Ç–≤
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º
- üîç –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö–æ–ª—Å—Ç–∞

## üõ† –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# Backend
npm run build          # –°–±–æ—Ä–∫–∞ TypeScript
npm run dev           # –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run typecheck     # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

# Frontend
cd frontend
npm run dev          # Dev —Å–µ—Ä–≤–µ—Ä Vite
npm run build        # –°–±–æ—Ä–∫–∞ –¥–ª—è production
npm run preview      # –ü—Ä–µ–≤—å—é —Å–æ–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
```

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```env
# Backend
PORT=3000
NODE_ENV=development

# Database (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DATABASE_URL –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
DATABASE_URL=postgresql://user:pass@localhost:5432/acdc
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=acdc
DB_SSL=false

# Docker PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=acdc
```

## üê≥ Docker

### –°–µ—Ä–≤–∏—Å—ã
- **api** - Node.js –±—ç–∫–µ–Ω–¥ –Ω–∞ –ø–æ—Ä—Ç—É 3000
- **db** - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–æ—Ä—Ç—É 5432

### –ö–æ–º–∞–Ω–¥—ã
```bash
# –ó–∞–ø—É—Å–∫
docker-compose up --build

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker-compose build --no-cache
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `diagrams` - –¥–∏–∞–≥—Ä–∞–º–º—ã (id, name, type, svg_data)
- `diagram_blocks` - –±–ª–æ–∫–∏ –¥–∏–∞–≥—Ä–∞–º–º
- `diagram_connections` - —Å–≤—è–∑–∏ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `sql/init.sql` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º—ã —á–µ—Ä–µ–∑ API
```bash
curl -X POST http://localhost:3000/api/v1/diagrams \
  -H "Content-Type: application/json" \
  -d '{
    "name": "My Class Diagram",
    "type": "class",
    "svg_data": "<svg>...</svg>"
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º
```bash
curl http://localhost:3000/api/v1/diagrams
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
1. –î–æ–±–∞–≤—å—Ç–µ —Ç–∏–ø –≤ `src/types.ts`
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–æ `frontend/src/components/`
3. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ `frontend/src/composables/useDiagramEditor.js`

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API
1. –î–æ–±–∞–≤—å—Ç–µ —Ä–æ—É—Ç –≤ `src/routes/`
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤ `src/controllers/`
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ ID –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ UUID –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- –û—Ç–≤–µ—Ç—ã API –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
- Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç proxy –∫ API –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üÜò –ü—Ä–æ–±–ª–µ–º—ã

1. **–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç—ã 3000 –∏ 5173 —Å–≤–æ–±–æ–¥–Ω—ã
2. **CORS –æ—à–∏–±–∫–∏** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ –±—ç–∫–µ–Ω–¥–µ
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. **Frontend –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –õ–æ–≥–∏
- Backend –ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å Docker
- Frontend –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏ (F12)

---
